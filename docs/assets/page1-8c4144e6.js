import"./base-08276557.js";import{a as p,E as r,b as w,c as k,d as D,e as y}from"./axios-3c0caa96.js";import{c as z,a as F,b as v,E}from"./el-input-03933b8a.js";import"./el-popper-50257b04.js";import{_ as T,d as U,o as $,c as L,b as a,w as o,a as g,F as S,e as m}from"./index-9fc94f8a.js";import"./index-f44ebcc6.js";import"./index-b561687f.js";const W=U({data(){return{lex:0,save:!0,dialogFormVisible:!1,page:1,totaldata:10,records:[],record:{createTime:"",endDate:"",id:0,startDate:"",status:0,title:""}}},methods:{getpage(e,t){const u=this;p({method:"post",url:"http://mall.qzimp.cn/mall/sms-flash-promotion/page",data:{current:e,size:t}}).then(function(f){u.records=f.data.data.page.records,u.totaldata=f.data.data.page.total})},jumper(){this.getpage(this.page,5)},Demandeupdate(){p({method:"post",url:"http://mall.qzimp.cn/mall/sms-flash-promotion/edit",data:this.record}).then(function(e){e.data.success?r({message:"操作成功.",type:"success"}):r({message:"操作失败",type:"error"})})},Demanderemove(e){p({method:"get",url:"http://mall.qzimp.cn/mall/sms-flash-promotion/del/"+e}).then(function(t){console.log(t.data.success),t.data.success?r({message:"操作成功.",type:"success"}):r({message:"操作失败",type:"error"})})},Demandeadd(){p({method:"post",url:"http://mall.qzimp.cn/mall/sms-flash-promotion/add",data:this.record}).then(function(e){e.data.success?r({message:"操作成功.",type:"success"}):r({message:"操作失败",type:"error"})})},update(e,t){this.lex=e,e==0?this.record=t:this.record={createTime:"",endDate:"",id:0,startDate:"",status:0,title:""},this.dialogFormVisible=!this.dialogFormVisible},planeok(){this.lex==0?this.Demandeupdate():this.Demandeadd(),this.dialogFormVisible=!this.dialogFormVisible,location.reload(),this.$router.go(0)},planeno(){this.dialogFormVisible=!this.dialogFormVisible},remove(e){this.Demanderemove(e.id),location.reload(),this.$router.go(0)}},mounted(){this.getpage(this.page,10)}}),q={class:"demo-pagination-block"},B=g("div",{class:"demonstration"},"Jump to",-1),j={class:"dialog-footer"};function N(e,t,u,f,I,P){const d=y,n=z,h=w,b=k,i=F,s=v,c=E,V=D;return $(),L(S,null,[a(h,{data:e.records,style:{width:"100%"}},{default:o(()=>[a(d,{prop:"createTime",label:"createTime",width:"150"}),a(d,{prop:"endDate",label:"endDate",width:"150"}),a(d,{prop:"id",label:"id",width:"150"}),a(d,{prop:"startDate",label:"startDate",width:"150"}),a(d,{prop:"status",label:"status",width:"150"}),a(d,{prop:"title",label:"title",width:"150"}),a(d,{fixed:"right",label:"Operations",width:"150"},{default:o(l=>[a(n,{link:"",type:"primary",size:"small",onClick:C=>e.update(0,l.row)},{default:o(()=>[m("update")]),_:2},1032,["onClick"]),a(n,{link:"",type:"primary",size:"small",onClick:C=>e.remove(l.row)},{default:o(()=>[m("remove")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(n,{type:"primary",onClick:t[0]||(t[0]=l=>e.update(1,0))},{default:o(()=>[m("add")]),_:1}),g("div",q,[B,a(b,{"current-page":e.page,"onUpdate:currentPage":t[1]||(t[1]=l=>e.page=l),"page-size":e.pageSize3,"onUpdate:pageSize":t[2]||(t[2]=l=>e.pageSize3=l),small:e.small,disabled:e.disabled,background:e.background,layout:"prev, pager, next, jumper",total:e.totaldata,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange,onClick:e.jumper},null,8,["current-page","page-size","small","disabled","background","total","onSizeChange","onCurrentChange","onClick"])]),a(V,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[9]||(t[9]=l=>e.dialogFormVisible=l),title:"update"},{footer:o(()=>[g("span",j,[a(n,{onClick:e.planeno},{default:o(()=>[m("Cancel")]),_:1},8,["onClick"]),a(n,{type:"primary",onClick:e.planeok},{default:o(()=>[m(" Confirm ")]),_:1},8,["onClick"])])]),default:o(()=>[a(c,{model:e.record},{default:o(()=>[a(s,{label:"createTime","label-width":e.formLabelWidth},{default:o(()=>[a(i,{modelValue:e.record.createTime,"onUpdate:modelValue":t[3]||(t[3]=l=>e.record.createTime=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"endDate","label-width":e.formLabelWidth},{default:o(()=>[a(i,{modelValue:e.record.endDate,"onUpdate:modelValue":t[4]||(t[4]=l=>e.record.endDate=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"id","label-width":e.formLabelWidth},{default:o(()=>[a(i,{modelValue:e.record.id,"onUpdate:modelValue":t[5]||(t[5]=l=>e.record.id=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"startDate","label-width":e.formLabelWidth},{default:o(()=>[a(i,{modelValue:e.record.startDate,"onUpdate:modelValue":t[6]||(t[6]=l=>e.record.startDate=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"status","label-width":e.formLabelWidth},{default:o(()=>[a(i,{modelValue:e.record.status,"onUpdate:modelValue":t[7]||(t[7]=l=>e.record.status=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"title","label-width":e.formLabelWidth},{default:o(()=>[a(i,{modelValue:e.record.title,"onUpdate:modelValue":t[8]||(t[8]=l=>e.record.title=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Q=T(W,[["render",N]]);export{Q as default};
