import"./base-08276557.js";import{a as n,E as s,b as C,c as k,d as T,e as I}from"./axios-3c0caa96.js";import{c as z,a as y,b as F,E}from"./el-input-03933b8a.js";import"./el-popper-50257b04.js";import{_ as v,d as N,o as U,c as P,b as o,w as t,a as h,F as $,e as p}from"./index-9fc94f8a.js";import"./index-f44ebcc6.js";import"./index-b561687f.js";const D=N({data(){return{save:!0,page:1,totaldata:10,dialogFormVisible:!1,records:[],record:{id:0,memberId:0,memberPhone:"",productId:0,productName:"",sendTime:"",subscribeTime:""}}},methods:{getpage(e,l){const u=this;n({method:"post",url:"http://mall.qzimp.cn/mall/sms-flash-promotion-session/page",data:{current:e,size:l}}).then(function(b){u.records=b.data.data.page.records,u.totaldata=b.data.data.page.total})},jumper(){this.getpage(this.page,5)},Demandeupdate(){n({method:"post",url:"http://mall.qzimp.cn/mall/sms-flash-promotion-session/edit",data:this.record}).then(function(e){e.data.success?s({message:"�����ɹ�.",type:"success"}):s({message:"����ʧ��",type:"error"})})},Demanderemove(e){n({method:"get",url:"http://mall.qzimp.cn/mall/sms-flash-promotion-session/del/"+e}).then(function(l){console.log(l.data.success),l.data.success?s({message:"�����ɹ�.",type:"success"}):s({message:"����ʧ��",type:"error"})})},Demandeadd(){n({method:"post",url:"http://mall.qzimp.cn/mall/sms-flash-promotion-session/add",data:this.record}).then(function(e){e.data.success?s({message:"�����ɹ�.",type:"success"}):s({message:"����ʧ��",type:"error"})})},update(e,l){console.log(l),this.lex=e,e==0?this.record=l:this.record={id:0,memberId:0,memberPhone:"",productId:0,productName:"",sendTime:"",subscribeTime:""},this.dialogFormVisible=!this.dialogFormVisible},planeok(){this.lex==0?this.Demandeupdate():this.Demandeadd(),this.dialogFormVisible=!this.dialogFormVisible,location.reload(),this.$router.go(0)},planeno(){this.dialogFormVisible=!this.dialogFormVisible},remove(e){this.Demanderemove(e.id),location.reload(),this.$router.go(0)}},mounted(){this.getpage(this.page,5)}}),L={class:"demo-pagination-block"},W=h("div",{class:"demonstration"},"Jump to",-1),S={class:"dialog-footer"};function q(e,l,u,b,B,j){const d=I,m=z,f=C,g=k,r=y,i=F,c=E,V=T;return U(),P($,null,[o(f,{data:e.records,style:{width:"100%"}},{default:t(()=>[o(d,{prop:"id",label:"id",width:"120"}),o(d,{prop:"memberId",label:"memberId",width:"120"}),o(d,{prop:"memberPhone",label:"memberPhone",width:"120"}),o(d,{prop:"productId",label:"productId",width:"120"}),o(d,{prop:"productName",label:"productName",width:"120"}),o(d,{prop:"sendTime",label:"sendTime",width:"120"}),o(d,{prop:"subscribeTime",label:"subscribeTime",width:"120"}),o(d,{fixed:"right",label:"Operations",width:"240"},{default:t(a=>[o(m,{link:"",type:"primary",size:"small",onClick:w=>e.update(0,a.row)},{default:t(()=>[p("update")]),_:2},1032,["onClick"]),o(m,{link:"",type:"primary",size:"small",onClick:w=>e.remove(a.row)},{default:t(()=>[p("remove")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),h("div",L,[W,o(g,{"current-page":e.page,"onUpdate:currentPage":l[0]||(l[0]=a=>e.page=a),"page-size":e.pageSize3,"onUpdate:pageSize":l[1]||(l[1]=a=>e.pageSize3=a),small:e.small,disabled:e.disabled,background:e.background,layout:"prev, pager, next, jumper",total:e.totaldata,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange,onClick:e.jumper},null,8,["current-page","page-size","small","disabled","background","total","onSizeChange","onCurrentChange","onClick"])]),o(V,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[9]||(l[9]=a=>e.dialogFormVisible=a),title:"update"},{footer:t(()=>[h("span",S,[o(m,{onClick:e.planeno},{default:t(()=>[p("Cancel")]),_:1},8,["onClick"]),o(m,{type:"primary",onClick:e.planeok},{default:t(()=>[p(" Confirm ")]),_:1},8,["onClick"])])]),default:t(()=>[o(c,{model:e.record},{default:t(()=>[o(i,{label:"id","label-width":e.formLabelWidth},{default:t(()=>[o(r,{modelValue:e.record.id,"onUpdate:modelValue":l[2]||(l[2]=a=>e.record.id=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"memberId","label-width":e.formLabelWidth},{default:t(()=>[o(r,{modelValue:e.record.memberId,"onUpdate:modelValue":l[3]||(l[3]=a=>e.record.memberId=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"memberPhone","label-width":e.formLabelWidth},{default:t(()=>[o(r,{modelValue:e.record.memberPhone,"onUpdate:modelValue":l[4]||(l[4]=a=>e.record.memberPhone=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"productId","label-width":e.formLabelWidth},{default:t(()=>[o(r,{modelValue:e.record.productId,"onUpdate:modelValue":l[5]||(l[5]=a=>e.record.productId=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"productName","label-width":e.formLabelWidth},{default:t(()=>[o(r,{modelValue:e.record.productName,"onUpdate:modelValue":l[6]||(l[6]=a=>e.record.productName=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"sendTime","label-width":e.formLabelWidth},{default:t(()=>[o(r,{modelValue:e.record.sendTime,"onUpdate:modelValue":l[7]||(l[7]=a=>e.record.sendTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(i,{label:"subscribeTime","label-width":e.formLabelWidth},{default:t(()=>[o(r,{modelValue:e.record.subscribeTime,"onUpdate:modelValue":l[8]||(l[8]=a=>e.record.subscribeTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Q=v(D,[["render",q]]);export{Q as default};
